Citicinemas.controller("SyncCtrl",function($scope,$timeout){$scope.SyncStatus=SyncStatus;$scope.Locations=Locations;$scope.refreshing=false;$scope.message="test";$scope.sync=function(location_id){$("#Loading").show("fade");$.ajax({url:"/admin/shows/sync/"+location_id,type:"json",success:function(data){$scope.SyncStatus=data}})};$scope.refresh=function(){$timeout(function(){if(!$scope.refreshing){$scope.refreshing=true;$.ajax({url:"/admin/shows/syncstatus/",type:"json",success:function(data){$scope.refreshing=false;$scope.SyncStatus=data;$("#Loading").hide("fade")}})}$scope.refresh()},500)};$timeout($scope.refresh,500)});