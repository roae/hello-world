function seatSelection(){$container=$(".seatsSelection"),$(".status-0",$container).on("click",function(){ticketsSelected.length<=countTickets&&countTickets?($(this).removeClass("status-0"),$(this).addClass("status-selected"),ticketsSelected.push(/place-\d+-\d+/.exec($(this).attr("class"))[0]),ticketsSelected.length>countTickets&&($("."+ticketsSelected[0]).removeClass("status-selected"),$("."+ticketsSelected[0]).addClass("status-0"),ticketsSelected.splice(0,1))):0==countTickets&&($(".message .content",$container).html("<p>"+__("no-tickets-selected-yet")+"</p><a href='#tickets' class='btn'>"+__("select-tickets")+"</a>"),$(".message",$container).show("fast"))})}var countTickets=totalPayment=0,countTicketsLimit=10,ticketsSelected=[];$(document).on("ready",function(){$.ajax({url:"/shows/seatlayout/"+$("#SeatLayout").data("show"),success:function(a){$("#SeatLayout").html(a),seatSelection()}}),$(".ticketsSelection .plus").on("click",function(){$parent=$(this).closest("tr"),$cantidad=$(".cantidad",$parent),cantidad=$cantidad.data("qty"),precio=$(".price",$parent).data("price"),$(".message",$container).hide("fast"),countTicketsLimit>countTickets&&(cantidad++,countTickets++,$cantidad.data("qty",cantidad),$cantidad.html(cantidad),subtotal=precio*cantidad,$(".subtotal",$parent).html("$"+subtotal.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")),totalPayment+=precio,$(".ticketsSelection .total .value").html("$"+totalPayment.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))}),$(".ticketsSelection .less").on("click",function(){$parent=$(this).closest("tr"),$cantidad=$(".cantidad",$parent),cantidad=$cantidad.data("qty"),precio=$(".price",$parent).data("price"),cantidad&&(cantidad--,countTickets--,$cantidad.data("qty",cantidad),$cantidad.html(cantidad),subtotal=precio*cantidad,$(".subtotal",$parent).html("$"+subtotal.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")),totalPayment-=precio,$(".ticketsSelection .total .value").html("$"+totalPayment.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))}),$(document).on("click",".closeMessage",function(){$(this).closest(".message").hide("fast")})});