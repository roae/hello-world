function seatSelection(){$container=$(".seatsSelection"),$(".status-0",$container).on("click",function(){if(ticketsSelected.length<=countTickets&&countTickets){$(".seatCheck",$(this)).attr("checked",!0),$(this).removeClass("status-0"),$(this).addClass("status-selected");var a=/place-\d+-\d+/.exec($(this).attr("class"))[0];ticketsSelected.push(a),ticketsSelected.length>countTickets&&(console.log(ticketsSelected[0]),$("."+ticketsSelected[0]).removeClass("status-selected"),$("."+ticketsSelected[0]).addClass("status-0"),$(".seatCheck",$("."+ticketsSelected[0])).attr("checked",!1),ticketsSelected.splice(0,1))}else 0==countTickets&&($(".message .content",$container).html("<p>"+__("no-tickets-selected-yet")+"</p><a href='#tickets' class='btn'>"+__("select-tickets")+"</a>"),$(".message",$container).show("fast"))})}function setSeatsSelected(){console.dir(BuySeat),$.each(BuySeat,function(a,b){console.dir(b),$.each(b.grid,function(a,b){"0"!=b&&($place=$(".place-"+b),$(".seatCheck",$place).attr("checked",!0),$place.removeClass("status-0").addClass("status-selected"),ticketsSelected.push("place-"+b))})})}var countTickets=totalPayment=0,countTicketsLimit=10,ticketsSelected=[];$(document).on("ready",function(){function a(){totalPayment=0,$(".ticketsSelection tr").each(function(){$parent=$(this),$cantidad=$(".cantidad",$parent),cantidad=$cantidad.data("qty"),precio=$(".price",$parent).data("price"),subtotal=precio*cantidad,$(".subtotal",$parent).html("$"+subtotal.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")),totalPayment+=subtotal,$(".ticketsSelection .total .value").html("$"+totalPayment.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"))})}$.ajax({url:"/shows/seatlayout/"+$("#SeatLayout").data("show"),success:function(a){$("#SeatLayout").html(a),seatSelection(),setSeatsSelected()}}),$(".ticketsSelection .plus").on("click",function(){$parent=$(this).closest("tr"),$cantidad=$(".cantidad",$parent),$qtyInput=$("input[rel='qty']",$parent),cantidad=$cantidad.data("qty"),precio=$(".price",$parent).data("price"),$(".message",$container).hide("fast"),countTicketsLimit>countTickets&&(cantidad++,countTickets++,$cantidad.data("qty",cantidad),$cantidad.html(cantidad),$qtyInput.attr("value",cantidad),a())}),$(".ticketsSelection .less").on("click",function(){$parent=$(this).closest("tr"),$cantidad=$(".cantidad",$parent),$qtyInput=$(".qtyInput",$parent),cantidad=$cantidad.data("qty"),precio=$(".price",$parent).data("price"),cantidad&&(cantidad--,countTickets--,$cantidad.data("qty",cantidad),$cantidad.html(cantidad),$qtyInput.attr("value",cantidad),a())}),$("input[rel='qty']").each(function(){$parent=$(this).closest("tr"),$cantidad=$(".cantidad",$parent),countTickets+=1*$(this).attr("value"),$cantidad.data("qty",$(this).attr("value")).html($(this).attr("value")),$cantidad.data("qty")}),a(),$(document).on("click",".closeMessage",function(){$(this).closest(".message").hide("fast")})});